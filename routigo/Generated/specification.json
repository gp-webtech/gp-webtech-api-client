{"openapi":"3.0.1","info":{"title":"RoutiGo Webhook REST API ","contact":{"name":"RoutiGo Team","url":"https://www.routigo.com","email":"team@routigo.com"},"version":"2.0"},"servers":[{"url":"https://api.routigo.com/api"}],"tags":[{"name":"Webhook"}],"paths":{"/v2/webhooks":{"get":{"tags":["Webhook"],"summary":"Retrieve a list of all registered webhook subscriptions","operationId":"getAllWebhooks","parameters":[{"name":"event","in":"query","description":"A RoutiGo event name to filter on - will return only webhooks for a specified event.","schema":{"type":"string"}},{"name":"type","in":"query","description":"A RoutiGo event type to filter on - will return only webhooks for a specified event type.","schema":{"type":"string"}}],"responses":{"200":{"description":"A list of all registered webhook subscriptions.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/WebhookConfig"}},"example":[{"id":"65cc90847249284b589d6504","routigoEvent":"ASSIGNMENT_DONE","routigoEventType":"ASSIGNMENT","serviceCentres":["AMS"],"action":{"name":"Sends RoutiGo webhook payload to my company listener url","url":"https://my.company.com/routigo-hooks-listener","headers":{"X-SECRET":"42","X-ENV":"my-env-name"},"queryParameters":{"someParam":"param42","anotherParam":"anotherParam42"},"minutesToLive":null,"secondsDelayBeforeRetry":null,"supplierToFilterOn":null}}]}}},"204":{"description":"There are no webhook subscriptions registered for the provided company."},"401":{"description":"Authentication information is missing or invalid.See the response for more detailed error description.","content":{"text/plain;charset=UTF-8":{"schema":{"example":"Could not find a proper way to authenticate"}}}},"403":{"description":"The user (or API key) does not have enough permissions to execute the request. See the response for more detailed error description.","content":{"text/plain;charset=UTF-8":{"schema":{"example":"User does not have enough permissions to execute the request"}}}},"500":{"description":"Unexpected error. Please contact RoutiGo for more details","content":{"text/plain;charset=UTF-8":{"schema":{"example":"An error has occurred while processing the request."}}}}},"security":[{"Token":[]},{"X-API-KEY":[]}]},"post":{"tags":["Webhook"],"summary":"Create a new webhook subscription by specifying the event, its type and action","operationId":"createWebhook","requestBody":{"description":"A \"task\" to register a new webhook subscription","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SaveWebhookConfig"},"example":{"routigoEvent":"ASSIGNMENT_DONE","routigoEventType":"ASSIGNMENT","serviceCentres":["AMS"],"action":{"name":"Sends RoutiGo webhook payload to my company listener url","url":"https://my.company.com/routigo-hooks-listener","headers":{"X-SECRET":"42","X-ENV":"my-env-name"},"queryParameters":{"someParam":"param42","anotherParam":"anotherParam42"},"minutesToLive":null,"secondsDelayBeforeRetry":null,"supplierToFilterOn":null}}}},"required":true},"responses":{"201":{"description":"A webhook subscription was successfully created and the result is returned back. The `Location` response header contains a path to the newly created entity e.g. `webhook/<new-webhook-id>`.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookConfig"},"example":{"id":"65cc90847249284b589d6504","routigoEvent":"ASSIGNMENT_DONE","routigoEventType":"ASSIGNMENT","serviceCentres":["AMS"],"action":{"name":"Sends RoutiGo webhook payload to my company listener url","url":"https://my.company.com/routigo-hooks-listener","headers":{"X-SECRET":"42","X-ENV":"my-env-name"},"queryParameters":{"someParam":"param42","anotherParam":"anotherParam42"},"minutesToLive":null,"secondsDelayBeforeRetry":null,"supplierToFilterOn":null}}}}},"400":{"description":"There is a problem with a request payload.See the response for more detailed error description.","content":{"text/plain;charset=UTF-8":{"schema":{"type":"string"}}}},"401":{"description":"Authentication information is missing or invalid.See the response for more detailed error description.","content":{"text/plain;charset=UTF-8":{"schema":{"example":"Could not find a proper way to authenticate"}}}},"403":{"description":"The user (or API key) does not have enough permissions to execute the request. See the response for more detailed error description.","content":{"text/plain;charset=UTF-8":{"schema":{"example":"User does not have enough permissions to execute the request"}}}},"500":{"description":"Unexpected error. Please contact RoutiGo for more details","content":{"text/plain;charset=UTF-8":{"schema":{"example":"An error has occurred while processing the request."}}}}},"security":[{"Token":[]},{"X-API-KEY":[]}]}},"/v2/webhooks/{webhookId}":{"get":{"tags":["Webhook"],"summary":"Retrieve a single webhook subscription by its id","operationId":"getWebhook","parameters":[{"name":"webhookId","in":"path","description":"A webhook identifier","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"The requested webhook subscription.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookConfig"},"example":{"id":"65cc90847249284b589d6504","routigoEvent":"ASSIGNMENT_DONE","routigoEventType":"ASSIGNMENT","serviceCentres":["AMS"],"action":{"name":"Sends RoutiGo webhook payload to my company listener url","url":"https://my.company.com/routigo-hooks-listener","headers":{"X-SECRET":"42","X-ENV":"my-env-name"},"queryParameters":{"someParam":"param42","anotherParam":"anotherParam42"},"minutesToLive":null,"secondsDelayBeforeRetry":null,"supplierToFilterOn":null}}}}},"404":{"description":"The webhook subscription with this id was not found.","content":{"text/plain;charset=UTF-8":{"schema":{"type":"string"}}}},"401":{"description":"Authentication information is missing or invalid.See the response for more detailed error description.","content":{"text/plain;charset=UTF-8":{"schema":{"example":"Could not find a proper way to authenticate"}}}},"403":{"description":"The user (or API key) does not have enough permissions to execute the request. See the response for more detailed error description.","content":{"text/plain;charset=UTF-8":{"schema":{"example":"User does not have enough permissions to execute the request"}}}},"500":{"description":"Unexpected error. Please contact RoutiGo for more details","content":{"text/plain;charset=UTF-8":{"schema":{"example":"An error has occurred while processing the request."}}}}},"security":[{"Token":[]},{"X-API-KEY":[]}]},"put":{"tags":["Webhook"],"summary":"Update a single webhook subscription by its id","operationId":"updateWebhook","parameters":[{"name":"webhookId","in":"path","description":"A webhook identifier","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"A \"task\" to update an existing webhook subscription","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SaveWebhookConfig"},"example":{"routigoEvent":"ASSIGNMENT_DONE","routigoEventType":"ASSIGNMENT","serviceCentres":["AMS"],"action":{"name":"Sends RoutiGo webhook payload to my company listener url","url":"https://my.company.com/routigo-hooks-listener","headers":{"X-SECRET":"42","X-ENV":"my-env-name"},"queryParameters":{"someParam":"param42","anotherParam":"anotherParam42"},"minutesToLive":null,"secondsDelayBeforeRetry":null,"supplierToFilterOn":null}}}},"required":true},"responses":{"200":{"description":"A webhook subscription was successfully updated and the result is returned back.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookConfig"},"example":{"id":"65cc90847249284b589d6504","routigoEvent":"ASSIGNMENT_DONE","routigoEventType":"ASSIGNMENT","serviceCentres":["AMS"],"action":{"name":"Sends RoutiGo webhook payload to my company listener url","url":"https://my.company.com/routigo-hooks-listener","headers":{"X-SECRET":"42","X-ENV":"my-env-name"},"queryParameters":{"someParam":"param42","anotherParam":"anotherParam42"},"minutesToLive":null,"secondsDelayBeforeRetry":null,"supplierToFilterOn":null}}}}},"404":{"description":"The webhook subscription with this id was not found.","content":{"text/plain;charset=UTF-8":{"schema":{"type":"string"}}}},"401":{"description":"Authentication information is missing or invalid.See the response for more detailed error description.","content":{"text/plain;charset=UTF-8":{"schema":{"example":"Could not find a proper way to authenticate"}}}},"403":{"description":"The user (or API key) does not have enough permissions to execute the request. See the response for more detailed error description.","content":{"text/plain;charset=UTF-8":{"schema":{"example":"User does not have enough permissions to execute the request"}}}},"500":{"description":"Unexpected error. Please contact RoutiGo for more details","content":{"text/plain;charset=UTF-8":{"schema":{"example":"An error has occurred while processing the request."}}}}},"security":[{"Token":[]},{"X-API-KEY":[]}]},"delete":{"tags":["Webhook"],"summary":"Delete a single webhook subscription by its id","operationId":"deleteWebhook","parameters":[{"name":"webhookId","in":"path","description":"A webhook identifier","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"The webhook subscription was successfully deleted."},"404":{"description":"The webhook subscription with this id was not found.","content":{"text/plain;charset=UTF-8":{"schema":{"type":"string"}}}},"401":{"description":"Authentication information is missing or invalid.See the response for more detailed error description.","content":{"text/plain;charset=UTF-8":{"schema":{"example":"Could not find a proper way to authenticate"}}}},"403":{"description":"The user (or API key) does not have enough permissions to execute the request. See the response for more detailed error description.","content":{"text/plain;charset=UTF-8":{"schema":{"example":"User does not have enough permissions to execute the request"}}}},"500":{"description":"Unexpected error. Please contact RoutiGo for more details","content":{"text/plain;charset=UTF-8":{"schema":{"example":"An error has occurred while processing the request."}}}}},"security":[{"Token":[]},{"X-API-KEY":[]}]}}},"components":{"schemas":{"EndpointNotificationAction":{"required":["name","url"],"type":"object","properties":{"name":{"type":"string","description":"A human-readable description of the action","example":"Sends RoutiGo webhook payload to my company listener url"},"url":{"type":"string","description":"An http url that action should call","example":"https://my.company.com/routigo-hooks-listener"},"headers":{"type":"object","additionalProperties":{"type":"string","description":"An optional map of header names and their values that should be sent together with action request"},"description":"An optional map of header names and their values that should be sent together with action request"},"queryParameters":{"type":"object","additionalProperties":{"type":"string","description":"An optional map of query parameter names and their values that should be sent together with action request"},"description":"An optional map of query parameter names and their values that should be sent together with action request"},"minutesToLive":{"type":"integer","description":"An optional integer value that represents the duration the message is valid in case of failures. Defaults to one day.","format":"int64"},"secondsDelayBeforeRetry":{"type":"integer","description":"An optional integer value that represents the time in between attempts of sending this webhook in case of failures. Defaults to 10 minutes","format":"int32"},"supplierToFilterOn":{"type":"string","description":"The optional supplier code that is used to filter outgoing webhooks. In case a webhook does not contain this supplier code, it is not send."}},"description":"Represents HTTP POST notification action that gets executed when the webhook is triggered"},"WebhookConfig":{"required":["action","id","routigoEvent","routigoEventType"],"type":"object","properties":{"id":{"type":"string","description":"An identifier of the webhook subscription","example":"5c5e538628e8a54a2a227ae1"},"routigoEvent":{"type":"string","description":"A RoutiGo event name that should trigger this webhook","example":"TOUR_PLANNED","enum":["STOP_DONE","TOUR_PLANNED","TOUR_ASSIGNED","TOUR_UNASSIGNED","TOUR_STARTED","TOUR_FINISHED","SHIPMENT_DONE","ASSIGNMENT_ARRIVED","ASSIGNMENT_DONE","STOP_ARRIVED"]},"routigoEventType":{"type":"string","description":"An event type that should trigger this webhook. See `Types` section for more information.","example":"TOUR","enum":["TOUR","STOP","SHIPMENT","ASSIGNMENT"]},"serviceCentres":{"type":"array","description":"The list of service centres this webhook should apply for.","example":"[MAARSSEN, DEMEERN]","items":{"type":"string","description":"The list of service centres this webhook should apply for.","example":"[MAARSSEN, DEMEERN]","default":"Defaults to all service centres the client has permissions to."},"default":"Defaults to all service centres the client has permissions to."},"action":{"$ref":"#/components/schemas/EndpointNotificationAction"}},"description":"An object representing a registered webhook subscription"},"SaveWebhookConfig":{"required":["action","routigoEvent","routigoEventType"],"type":"object","properties":{"routigoEvent":{"type":"string","description":"A RoutiGo event name that should trigger this webhook","example":"TOUR_PLANED","enum":["STOP_DONE","TOUR_PLANNED","TOUR_ASSIGNED","TOUR_UNASSIGNED","TOUR_STARTED","TOUR_FINISHED","SHIPMENT_DONE","ASSIGNMENT_ARRIVED","ASSIGNMENT_DONE","STOP_ARRIVED"]},"routigoEventType":{"type":"string","description":"An event type that should trigger this webhook. See `Types` section for more information.","example":"TOUR","enum":["TOUR","STOP","SHIPMENT","ASSIGNMENT"]},"serviceCentres":{"type":"array","description":"The list of service centres this webhook should apply for.","example":"[MAARSSEN, DEMEERN]","items":{"type":"string","description":"The list of service centres this webhook should apply for.","example":"[MAARSSEN, DEMEERN]","default":"Defaults to all service centres the client has permissions to."},"default":"Defaults to all service centres the client has permissions to."},"action":{"$ref":"#/components/schemas/EndpointNotificationAction"}},"description":"An object representing a request to register a new webhook or update an existing subscription"}},"securitySchemes":{"X-API-KEY-SUPPLIER":{"type":"apiKey","name":"X-API-KEY-SUPPLIER","in":"header"},"X-API-KEY":{"type":"apiKey","name":"X-API-KEY","in":"header"},"Token":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}